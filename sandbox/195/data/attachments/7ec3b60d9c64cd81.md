# Test info

- Name: Type of user: Client >> MW Menu: Account >> Sub-menu: Users >> Sub-menu: Agents >> Create Agent - User: Client-Elite-1-Existing
- Location: /opt/atlassian/pipelines/agent/build/tests/specs/clients/account/users/agents.spec.ts:23:25

# Error details

```
TimeoutError: locator.fill: Timeout 20000ms exceeded.
Call log:
  - waiting for getByRole('textbox', { name: 'Email*' })

    at AddAgentPage.fillAccountContactInfo (/opt/atlassian/pipelines/agent/build/tests/pages/client/account/users/AddAgentPage.ts:128:31)
    at AddAgentPage.fillAccountContactInfoWithDefaultValuesAndEmail (/opt/atlassian/pipelines/agent/build/tests/pages/client/account/users/AddAgentPage.ts:164:20)
    at /opt/atlassian/pipelines/agent/build/tests/specs/clients/account/users/agents.spec.ts:30:51
```

# Page snapshot

```yaml
- navigation:
  - link "IDX Broker":
    - /url: /mgmt/dashboard
    - img "IDX Broker"
  - list:
    - listitem
- text: Notifications
- strong: You’re all caught up! Keep an eye out for new notifications. We’ll post them here.
- navigation:
  - list:
    - listitem
    - listitem
    - listitem
- status
```

# Test source

```ts
   28 |     readonly officePhoneField: Locator;
   29 |     readonly officeFaxField: Locator;
   30 |     readonly pagerField: Locator;
   31 |     readonly preferredPhoneDropdown: Locator;
   32 |     readonly smsOptInRadioYes: Locator;
   33 |     readonly smsOptInRadioNo: Locator;
   34 |     readonly smsAlertPhoneField: Locator;
   35 |     //readonly bioDetailsField: Locator;
   36 |     
   37 |     // Action buttons
   38 |     readonly saveChangesButton: Locator;
   39 |     readonly resetButton: Locator;
   40 |     
   41 |     // Success message
   42 |     readonly successMessage: Locator;
   43 |
   44 |     /**
   45 |      * Constructor - initializes the page object and locators
   46 |      * @param page - Playwright page object
   47 |      */
   48 |     constructor(page: Page) {
   49 |         super(page);
   50 |         
   51 |         // Initialize all locators
   52 |         this.emailField = page.getByRole('textbox', { name: 'Email*' });
   53 |         this.passwordField = page.getByRole('textbox', { name: 'Password*' });
   54 |         this.passwordToggle = page.locator('.toggle-password');
   55 |         this.firstNameField = page.getByRole('textbox', { name: 'First Name' });
   56 |         this.lastNameField = page.getByRole('textbox', { name: 'Last Name' });
   57 |         this.displayNameField = page.getByRole('textbox', { name: 'Display Name' });
   58 |         this.titleField = page.getByRole('textbox', { name: 'Title/Description' });
   59 |         this.roleDropdown = page.getByLabel('Role');
   60 |         this.addressField = page.getByRole('textbox', { name: 'Address' });
   61 |         this.cityField = page.getByRole('textbox', { name: 'City' });
   62 |         this.stateField = page.getByRole('textbox', { name: 'State/Province' });
   63 |         this.zipField = page.getByRole('textbox', { name: 'Zip Code' });
   64 |         this.countryField = page.getByRole('textbox', { name: 'Country' });
   65 |         this.homePhoneField = page.getByRole('textbox', { name: 'Home Phone' });
   66 |         this.homeFaxField = page.getByRole('textbox', { name: 'Home Fax' });
   67 |         this.cellPhoneField = page.getByRole('textbox', { name: 'Cell Phone' });
   68 |         this.officePhoneField = page.getByRole('textbox', { name: 'Office Phone' });
   69 |         this.officeFaxField = page.getByRole('textbox', { name: 'Office Fax' });
   70 |         this.pagerField = page.getByRole('textbox', { name: 'Pager' });
   71 |         this.preferredPhoneDropdown = page.getByLabel('Preferred Phone');
   72 |         this.smsOptInRadioYes = page.getByRole('radio', { name: 'Yes' });
   73 |         this.smsOptInRadioNo = page.getByRole('radio', { name: 'No' });
   74 |         this.smsAlertPhoneField = page.getByRole('textbox', { name: 'Phone', exact: true });
   75 |         
   76 |         // Actions
   77 |         this.saveChangesButton = page.getByRole('button', { name: 'Save Changes' });
   78 |         this.resetButton = page.getByRole('button', { name: 'Reset' });
   79 |         
   80 |         // Success message
   81 |         this.successMessage = page.locator('#jGrowl');
   82 |     }
   83 |
   84 |     /**
   85 |      * Navigate to the Add Agent page
   86 |      */
   87 |     async navigateToAddAgentPage() {
   88 |         // Navigate through the menu structure to reach Add Agent page
   89 |         await this.page.locator('#idx-mw-navigation-bar').getByAltText('icon').click();
   90 |         await this.page.locator('span').filter({ hasText: /^Account$/ }).click();
   91 |         await this.page.getByText('Users', { exact: true }).click();
   92 |         await this.page.getByRole('link', { name: 'Agents' }).click();
   93 |         await this.page.getByRole('link', { name: 'Add Agent' }).click();
   94 |     }
   95 |
   96 |     /**
   97 |    * Go to directly to the Add Agent page
   98 |    */
   99 |   async goto(){
  100 |     await this.page.goto(envConfig.MW_BASE_URL + '/mgmt/agents/create');
  101 |   }
  102 |
  103 |     /**
  104 |      * Fill in the basic required account/contact information
  105 |      * @param agentInfo - Object containing agent information
  106 |      */
  107 |     async fillAccountContactInfo(agentInfo: {
  108 |         email: string,
  109 |         password: string,
  110 |         firstName: string,
  111 |         lastName: string,
  112 |         displayName: string,
  113 |         title: string,
  114 |         role: 'agent' | 'management' | 'staff',
  115 |         address?: string,
  116 |         city?: string,
  117 |         state?: string,
  118 |         zip?: string,
  119 |         country?: string,
  120 |         homePhone?: string,
  121 |         cellPhone?: string,
  122 |         officePhone?: string,
  123 |         preferredPhone?: 'agentCellPhone' | 'agentHomePhone' | 'agentOfficePhone',
  124 |         enableSmsAlerts?: boolean,
  125 |         smsAlertPhone?: string
  126 |     }) {
  127 |         // Fill required fields
> 128 |         await this.emailField.fill(agentInfo.email);
      |                               ^ TimeoutError: locator.fill: Timeout 20000ms exceeded.
  129 |         await this.passwordField.fill(agentInfo.password);
  130 |         await this.firstNameField.fill(agentInfo.firstName);
  131 |         await this.lastNameField.fill(agentInfo.lastName);
  132 |         await this.displayNameField.fill(agentInfo.displayName);
  133 |         await this.titleField.fill(agentInfo.title);
  134 |         await this.roleDropdown.selectOption(agentInfo.role);
  135 |
  136 |         // Fill optional fields if provided
  137 |         if (agentInfo.address) await this.addressField.fill(agentInfo.address);
  138 |         if (agentInfo.city) await this.cityField.fill(agentInfo.city);
  139 |         if (agentInfo.state) await this.stateField.fill(agentInfo.state);
  140 |         if (agentInfo.zip) await this.zipField.fill(agentInfo.zip);
  141 |         if (agentInfo.country) await this.countryField.fill(agentInfo.country);
  142 |         if (agentInfo.homePhone) await this.homePhoneField.fill(agentInfo.homePhone);
  143 |         if (agentInfo.cellPhone) await this.cellPhoneField.fill(agentInfo.cellPhone);
  144 |         if (agentInfo.officePhone) await this.officePhoneField.fill(agentInfo.officePhone);
  145 |         
  146 |         // Set preferred phone if provided
  147 |         if (agentInfo.preferredPhone) {
  148 |             await this.preferredPhoneDropdown.selectOption(agentInfo.preferredPhone);
  149 |         }
  150 |         
  151 |         // Configure SMS alerts if needed
  152 |         if (agentInfo.enableSmsAlerts) {
  153 |             await this.smsOptInRadioYes.check();
  154 |             if (agentInfo.smsAlertPhone) {
  155 |                 await this.smsAlertPhoneField.fill(agentInfo.smsAlertPhone);
  156 |             }
  157 |         }
  158 |     }
  159 |
  160 |     /**
  161 |      * Fill in the basic required account/contact information with default values
  162 |      */
  163 |     async fillAccountContactInfoWithDefaultValuesAndEmail(email: string) {
  164 |         await this.fillAccountContactInfo({
  165 |             email: email,
  166 |             password: '123456Asd!@#',
  167 |             firstName: 'Qa',
  168 |             lastName: 'UiAutomation',
  169 |             displayName: 'QaUiAutomation',
  170 |             title: 'DONT TOUCH',
  171 |             role: 'agent',
  172 |             address: '3562 SE Harrison St',
  173 |             city: 'Portland',
  174 |             state: 'Oregon',
  175 |             zip: '97214',
  176 |             country: 'United States',
  177 |             homePhone: '1001001002',
  178 |             cellPhone: '3055405076',
  179 |             officePhone: '1001001001',
  180 |             preferredPhone: 'agentCellPhone',
  181 |             enableSmsAlerts: true,
  182 |             smsAlertPhone: '+13055405076'
  183 |         });
  184 |     }
  185 |
  186 |     /**
  187 |      * Submit the form by clicking the Save Changes button
  188 |      */
  189 |     async saveChanges() {
  190 |         await this.saveChangesButton.click();
  191 |         await waitForPageToBeFullyLoaded(this.page);
  192 |     }
  193 |
  194 |     /**
  195 |      * Reset the form by clicking the Reset button
  196 |      */
  197 |     async resetForm() {
  198 |         await this.resetButton.click();
  199 |     }
  200 |
  201 | }
```