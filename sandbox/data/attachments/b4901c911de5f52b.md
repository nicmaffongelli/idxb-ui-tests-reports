# Test info

- Name: Run these tests in serial for each client >> Enable Request Registration at page level and validate it on the FE page - User: Client-Engage-1-Existing
- Location: /opt/atlassian/pipelines/agent/build/src/tests/specs/clients/06_design/02_website/01_pageTemplates/pageLevelLeadRegistration.spec.ts:12:13

# Error details

```
TimeoutError: locator.waitFor: Timeout 20000ms exceeded.
Call log:
  - waiting for getByRole('link', { name: 'Address' }) to be visible

    at PageTemplatesPage.goto (/opt/atlassian/pipelines/agent/build/src/page-objects/client/06_design/02_website/PageTemplatesPage.ts:49:32)
    at /opt/atlassian/pipelines/agent/build/src/tests/specs/clients/06_design/02_website/01_pageTemplates/pageLevelLeadRegistration.spec.ts:17:13
```

# Page snapshot

```yaml
- navigation:
  - link "IDX Broker":
    - /url: /mgmt/dashboard
    - img "IDX Broker"
  - list:
    - listitem
- text: Notifications
- strong: You’re all caught up! Keep an eye out for new notifications. We’ll post them here.
- navigation:
  - list:
    - listitem
    - listitem
    - listitem
- paragraph:
  - text: Services © 2025
  - link "IDX Broker":
    - /url: https://www.idxbroker.com
  - text: . All rights reserved.
```

# Test source

```ts
   1 | import { Page, Locator, expect, BasePage, waitForPageToBeFullyLoaded } from '@shared-client-imports';
   2 |
   3 | /**
   4 |  * PageTemplatesPage
   5 |  * Page Object Model for managing page templates
   6 |  */
   7 | export class PageTemplatesPage extends BasePage {
   8 |     // Buttons and links
   9 |     readonly advancedSearchPageLink: Locator;
   10 |     readonly deleteLink: Locator;
   11 |     readonly addressLink: Locator;
   12 |     // Table elements
   13 |     readonly tableRows: Locator;
   14 |     
   15 |     // Confirmation dialog
   16 |     readonly confirmYesButton: Locator;
   17 |     
   18 |     // Notifications
   19 |     readonly successNotification: Locator;
   20 |     
   21 |     /**
   22 |      * Constructor for PageTemplatesPage
   23 |      * @param page - Playwright page object
   24 |      */
   25 |     constructor(page: Page) {
   26 |         super(page);
   27 |         
   28 |         // Buttons and links
   29 |         this.advancedSearchPageLink = page.locator('[data-category="search"][data-type="single"]').first();
   30 |         this.deleteLink = page.getByRole('link', { name: 'Delete' });
   31 |         this.addressLink = page.getByRole('link', { name: 'Address' });
   32 |         
   33 |         // Table elements
   34 |         this.tableRows = page.locator('#pagesTable tbody tr');
   35 |         
   36 |         // Confirmation dialog
   37 |         this.confirmYesButton = page.getByRole('button', { name: 'Yes' });
   38 |         
   39 |         // Notifications
   40 |         this.successNotification = page.locator('#jGrowl');
   41 |     }
   42 |     
   43 |     /**
   44 |      * Go directly to the Page Templates management page
   45 |      */
   46 |     async goto() {
   47 |         await this.page.goto(`${this.globalAndEnvironmentVariables.MW_BASE_URL}/mgmt/pages`);
   48 |         await waitForPageToBeFullyLoaded(this.page);
>  49 |         await this.addressLink.waitFor({ state: 'visible' });
      |                                ^ TimeoutError: locator.waitFor: Timeout 20000ms exceeded.
   50 |         await this.advancedSearchPageLink.waitFor({ state: 'visible' });
   51 |     }
   52 |
   53 |     /**
   54 |      * Go directly to the Page Templates management page
   55 |      */
   56 |     async gotoFePage(feURL: string) {
   57 |         await this.page.goto(feURL);
   58 |         await waitForPageToBeFullyLoaded(this.page);
   59 |         return this.page;
   60 |     }
   61 |
   62 |     /**
   63 |      * Go to a specific front end page
   64 |      */
   65 |     async goToFrontEndPage(): Promise<Page> {
   66 |         const newPagePromise = this.page.context().waitForEvent('page');
   67 |         await this.advancedSearchPageLink.click();
   68 |         const newPage = await newPagePromise;
   69 |         await waitForPageToBeFullyLoaded(newPage);
   70 |         return newPagePromise;
   71 |     }
   72 |
   73 |     /**
   74 |      * Click the "Edit" link in the Preferences column for the first search page
   75 |      */
   76 |     async clickEditPreferencesForFirstSearchPage(): Promise<void> {
   77 |         const firstRow = this.tableRows.nth(1);
   78 |         const rowId = await firstRow.getAttribute('id') || '';
   79 |         console.log(`First row ID: ${rowId}`);
   80 |         const editLink = this.page.locator(`a[href="/mgmt/page-preferences/${rowId}"]`);
   81 |         await editLink.click();
   82 |     }
   83 |     
   84 |     /**
   85 |      * Find a page in the table by its title
   86 |      * @param pageTitle The title of the page to find
   87 |      * @returns Locator for the table row containing the page
   88 |      */
   89 |     getPageRowByTitle(pageTitle: string): Locator {
   90 |         return this.page.locator(`tr:has-text("${pageTitle}")`);
   91 |     }
   92 |     
   93 |     /**
   94 |      * Get the page ID from the table row
   95 |      * @param pageRow Locator for the table row
   96 |      * @returns The page ID as a string
   97 |      */
   98 |     async getPageId(pageRow: Locator): Promise<string> {
   99 |         const id = await pageRow.getAttribute('id');
  100 |         return id || '';
  101 |     }
  102 |     
  103 |     /**
  104 |      * Delete a page by its title
  105 |      * @param pageTitle The title of the page to delete
  106 |      */
  107 |     async deletePage(pageTitle: string) {
  108 |         const pageRow = this.getPageRowByTitle(pageTitle);
  109 |         await pageRow.locator(this.deleteLink).click();
  110 |         
  111 |         // Wait for confirmation dialog and confirm deletion
  112 |         await this.confirmYesButton.click();
  113 |         
  114 |         // Verify success notification
  115 |         await expect(this.successNotification).toContainText('The page has been removed from the system.');
  116 |     }
  117 | }
```