# Test info

- Name: Run these tests in serial for each client >> Create Search Page - User: Client-Engage-1-Existing
- Location: /opt/atlassian/pipelines/agent/build/src/tests/specs/clients/06_design/02_website/01_pageTemplates/createSearchFEPage.spec.ts:14:13

# Error details

```
TimeoutError: locator.click: Timeout 20000ms exceeded.
Call log:
  - waiting for locator('h2').filter({ hasText: 'Recommended Templates' }).locator('..').locator('ul.thumbnails').locator(locator('.thumbnail.item')).filter({ hasText: 'Precision Listings Search' }).locator(locator('button.activate'))
    - locator resolved to <button data-html="true" data-page-id="9740" data-deprecated="0" data-template-id="743" data-userlevelbitmask="1" data-partner-custom-template="" data-allowedlevelbitmask="1023" class="btn activate  restricted" data-loading-text="activating..." data-template="precisionListingsSearch" data-twig-name="precisionListingsSearch-1.002.twig" data-restrictedmessage="Available to Engage Subscribers. Visit <b>Account → Upgrade</b> to manage account level.">↵                    Activate                </button>
  - attempting click action
    2 × waiting for element to be visible, enabled and stable
      - element is not visible
    - retrying click action
    - waiting 20ms
    2 × waiting for element to be visible, enabled and stable
      - element is not visible
    - retrying click action
      - waiting 100ms
    38 × waiting for element to be visible, enabled and stable
       - element is not visible
     - retrying click action
       - waiting 500ms

    at CreateSearchFEPagePage.selectTemplate (/opt/atlassian/pipelines/agent/build/src/page-objects/client/06_design/02_website/CreateSearchFEPagePage.ts:65:76)
    at /opt/atlassian/pipelines/agent/build/src/tests/specs/clients/06_design/02_website/01_pageTemplates/createSearchFEPage.spec.ts:20:13
```

# Page snapshot

```yaml
- navigation:
  - link "IDX Broker":
    - /url: /mgmt/dashboard
    - img "IDX Broker"
  - list:
    - listitem
- text: Notifications
- strong: You’re all caught up! Keep an eye out for new notifications. We’ll post them here.
- navigation:
  - list:
    - listitem
    - listitem
    - listitem
- paragraph:
  - text: Services © 2025
  - link "IDX Broker":
    - /url: https://www.idxbroker.com
  - text: . All rights reserved.
```

# Test source

```ts
   1 | import { Page, Locator, BasePage, waitForPageToBeFullyLoaded, expect } from '@shared-client-imports';
   2 |
   3 | /**
   4 |  * SearchPageBuilderPage
   5 |  * Page Object Model for creating and managing search pages
   6 |  */
   7 | export class CreateSearchFEPagePage extends BasePage {
   8 |     // Navigation and header elements
   9 |     readonly pageHeader: Locator;
   10 |     readonly successNotification: Locator;
   11 |     
   12 |     // Template selection elements
   13 |     readonly recommendedTemplatesSection: Locator;
   14 |     readonly legacyTemplatesToggle: Locator;
   15 |     readonly legacyTemplatesSection: Locator;
   16 |     readonly templateItem: Locator;
   17 |     readonly templateActivateButton: Locator;
   18 |     
   19 |     // Create page modal elements
   20 |     readonly pageNameInput: Locator;
   21 |     readonly modalSubmitButton: Locator;
   22 |     
   23 |     /**
   24 |      * Constructor for SearchPageBuilderPage
   25 |      * @param page - Playwright page object
   26 |      */
   27 |     constructor(page: Page) {
   28 |         super(page);
   29 |         
   30 |         // Navigation and header elements
   31 |         this.pageHeader = page.locator('.page-header h1');
   32 |         this.successNotification = page.locator('#jGrowl');
   33 |         
   34 |         // Template selection elements
   35 |         this.recommendedTemplatesSection = page.locator('h2', { hasText: 'Recommended Templates' }).locator('..').locator('ul.thumbnails');
   36 |         this.legacyTemplatesToggle = page.locator('h2[data-toggle="collapse"][data-target="#legacy-template-body"]');
   37 |         this.legacyTemplatesSection = page.locator('#legacy-template-body');
   38 |         this.templateItem = page.locator('.thumbnail.item');
   39 |         this.templateActivateButton = page.locator('button.activate');
   40 |         
   41 |         // Create page modal elements
   42 |         this.pageNameInput = page.getByRole('textbox', { name: 'Page Name:*' });
   43 |         this.modalSubmitButton = page.getByRole('button', { name: 'Submit' });
   44 |     }
   45 |     
   46 |     /**
   47 |      * Go directly to the search page builder
   48 |      */
   49 |     async goto() {
   50 |         await this.page.goto(`${this.globalAndEnvironmentVariables.MW_BASE_URL}/mgmt/templates/search`);
   51 |         await waitForPageToBeFullyLoaded(this.page);
   52 |     }
   53 |     
   54 |     /**
   55 |      * Select a template by its display name
   56 |      * @param templateName The display name of the template to select
   57 |      */
   58 |     async selectTemplate(templateName: string) {
   59 |         // First check in recommended templates
   60 |         const recommendedTemplate = this.recommendedTemplatesSection
   61 |             .locator(this.templateItem)
   62 |             .filter({ hasText: templateName });
   63 |         
   64 |         if (await recommendedTemplate.count() > 0) {
>  65 |             await recommendedTemplate.locator(this.templateActivateButton).click();
      |                                                                            ^ TimeoutError: locator.click: Timeout 20000ms exceeded.
   66 |             return;
   67 |         }
   68 |         
   69 |         // If not found, check legacy templates
   70 |         // Expand legacy templates section if it's collapsed
   71 |         if (await this.legacyTemplatesSection.isHidden()) {
   72 |             await this.legacyTemplatesToggle.click();
   73 |             // Wait for the animation to complete
   74 |             await this.page.waitForTimeout(500);
   75 |         }
   76 |         
   77 |         const legacyTemplate = this.legacyTemplatesSection
   78 |             .locator(this.templateItem)
   79 |             .filter({ hasText: templateName });
   80 |         
   81 |         if (await legacyTemplate.count() > 0) {
   82 |             await legacyTemplate.locator(this.templateActivateButton).click();
   83 |             return;
   84 |         }
   85 |         
   86 |         throw new Error(`Template "${templateName}" not found`);
   87 |     }
   88 |     
   89 |     /**
   90 |      * Fill in the page details in the creation modal
   91 |      * @param pageName The name for the new search page
   92 |      */
   93 |     async fillPageDetails(pageName: string) {
   94 |         await this.page.waitForTimeout(100);
   95 |         await this.pageNameInput.pressSequentially(pageName, { delay: 100 });
   96 |         await this.page.keyboard.press('Tab');
   97 |         await this.page.waitForTimeout(100);
   98 |     }
   99 |     
  100 |     /**
  101 |      * Submit the page creation form
  102 |      */
  103 |     async submitPageCreation() {
  104 |         await this.modalSubmitButton.click();
  105 |         await expect(this.successNotification).toContainText('Your new page has been created.');
  106 |     }
  107 | }
```