# Test info

- Name: Type of user: Client >> MW Menu: Account >> Sub-menu: Users >> Sub-menu: Agents >> Create Agent - User: Client-Engage-1-Existing
- Location: /opt/atlassian/pipelines/agent/build/tests/specs/clients/account/users/agents.spec.ts:23:25

# Error details

```
Error: page.goto: net::ERR_ABORTED at https://middleware.idxsandbox.com/mgmt/agents
Call log:
  - navigating to "https://middleware.idxsandbox.com/mgmt/agents", waiting until "load"

    at ManageAgentsPage.goto (/opt/atlassian/pipelines/agent/build/tests/pages/client/account/users/ManageAgentsPage.ts:86:25)
    at /opt/atlassian/pipelines/agent/build/tests/specs/clients/account/users/agents.spec.ts:33:55
```

# Page snapshot

```yaml
- navigation:
  - link "IDX Broker":
    - /url: /mgmt/dashboard
    - img "IDX Broker"
  - list:
    - listitem:
      - text: Sandbox
      - strong: "Signed in as:"
      - text: Nic (3265)
    - listitem:
      - text: "12"
      - img
- text: Notifications
- button "Clear All"
- text: retail clients only - high
- button "Dismiss Notification":
  - img "Dismiss Notification"
- text: all clients - high
- button "Dismiss Notification":
  - img "Dismiss Notification"
- text: retail clients only - high
- button "Dismiss Notification":
  - img "Dismiss Notification"
- text: all clients - high
- button "Dismiss Notification":
  - img "Dismiss Notification"
- text: retail clients only - high
- button "Dismiss Notification":
  - img "Dismiss Notification"
- text: all clients - high
- button "Dismiss Notification":
  - img "Dismiss Notification"
- text: retail clients only - high
- button "Dismiss Notification":
  - img "Dismiss Notification"
- text: all clients - high
- button "Dismiss Notification":
  - img "Dismiss Notification"
- text: retail clients only - high
- button "Dismiss Notification":
  - img "Dismiss Notification"
- text: all clients - high
- button "Dismiss Notification":
  - img "Dismiss Notification"
- text: retail clients only - high
- button "Dismiss Notification":
  - img "Dismiss Notification"
- text: all clients - high
- button "Dismiss Notification":
  - img "Dismiss Notification"
- navigation:
  - list:
    - listitem: Home +
    - listitem: Leads +
    - listitem: Listings +
    - listitem: Messages +
    - listitem:
      - link "MLS":
        - /url: /mgmt/mls-membership
    - listitem: Design +
    - listitem: Account -
    - listitem: Support +
- link "View All":
  - /url: /mgmt/agents
- list:
  - listitem:
    - textbox "Edit Another Agent"
    - link "Go":
      - /url: "/mgmt/agents/{id}/edit"
- heading "Edit Agent QaUiAutomation" [level=1]
- list:
  - listitem:
    - link "Account / Contact":
      - /url: "#accountContact"
  - listitem:
    - link "Office":
      - /url: "#officeMembership"
  - listitem:
    - link "Photo":
      - /url: "#photo"
  - listitem:
    - link "MLS":
      - /url: "#mls"
  - listitem:
    - link "Sub-Header":
      - /url: "#agentSubheader"
  - listitem:
    - link "Permissions":
      - /url: "#permissions"
  - listitem:
    - link "Roster":
      - /url: "#roster"
  - listitem:
    - link "Property Update":
      - /url: "#propertyUpdate"
  - listitem:
    - link "Languages":
      - /url: "#languages"
  - listitem:
    - link "CRM Integration":
      - /url: "#crmIntegration"
- heading "Account / Contact" [level=2]
- paragraph: Setup the basic contact information for this agent as well.
- paragraph: Contact support to edit email.
- group "Account Information":
  - text: Account Information Email*
  - textbox "Email*" [disabled]: idxqamv+cf0cdb7b-5f3a-4d9c-8d26-a298be9bc775@gmail.com
  - text: Contact Information First Name
  - textbox "First Name": Qa
  - text: Last Name
  - textbox "Last Name": UiAutomation
  - text: Display Name
  - textbox "Display Name": QaUiAutomation
  - text: Title/Description
  - textbox "Title/Description": DONT TOUCH
  - text: Primary Email
  - textbox "Primary Email": idxqamv+cf0cdb7b-5f3a-4d9c-8d26-a298be9bc775@gmail.com
  - separator
  - text: Role
  - combobox "Role Role":
    - option "Agent/Broker" [selected]
    - option "Management"
    - option "Staff"
  - text: Address
  - textbox "Address": 3562 SE Harrison St
  - text: City
  - textbox "City": Portland
  - text: State/Province
  - textbox "State/Province": Oregon
  - text: Zip Code
  - textbox "Zip Code": "97214"
  - text: Country
  - textbox "Country": United States
  - separator
  - text: Home Phone
  - textbox "Home Phone": "1001001002"
  - text: Home Fax
  - textbox "Home Fax"
  - text: Cell Phone
  - textbox "Cell Phone": "3055405076"
  - text: Office Phone
  - textbox "Office Phone": "1001001001"
  - text: Office Fax
  - textbox "Office Fax"
  - text: Pager
  - textbox "Pager"
  - text: Preferred Phone
  - combobox "Preferred Phone":
    - option "Cell Phone" [selected]
    - option "Home Phone"
    - option "Office Phone"
  - text: SMS Alerts Opt-In
  - radio "Yes" [checked]
  - text: "Yes"
  - radio "No"
  - text: No Phone
  - textbox "Phone": "+13055405076"
  - text: Bio Information Bio Page Details
  - table:
    - rowgroup:
      - row "Jump to tool buttons - Alt+Q, Jump to editor - Alt-Z, Jump to element path - Alt-X Format Font family Font size Jump to tool buttons - Alt+Q, Jump to editor - Alt-Z, Jump to element path - Alt-X":
        - cell "Jump to tool buttons - Alt+Q, Jump to editor - Alt-Z, Jump to element path - Alt-X Format Font family Font size Jump to tool buttons - Alt+Q, Jump to editor - Alt-Z, Jump to element path - Alt-X":
          - link "Jump to tool buttons - Alt+Q, Jump to editor - Alt-Z, Jump to element path - Alt-X":
            - /url: "#"
          - table:
            - rowgroup:
              - row "Format Font family Font size":
                - cell
                - cell:
                  - link "Bold (Ctrl+B)":
                    - /url: javascript:;
                - cell:
                  - link "Italic (Ctrl+I)":
                    - /url: javascript:;
                - cell:
                  - link "Underline (Ctrl+U)":
                    - /url: javascript:;
                - cell:
                  - link "Strikethrough":
                    - /url: javascript:;
                - cell
                - cell:
                  - link "Insert horizontal ruler":
                    - /url: javascript:;
                - cell
                - cell:
                  - link "Subscript":
                    - /url: javascript:;
                - cell:
                  - link "Superscript":
                    - /url: javascript:;
                - cell
                - cell:
                  - link "Align full":
                    - /url: javascript:;
                - cell
                - cell "Format":
                  - table:
                    - rowgroup:
                      - row "Format":
                        - cell "Format":
                          - link "Format":
                            - /url: javascript:;
                        - cell:
                          - link:
                            - /url: javascript:;
                - cell "Font family":
                  - table:
                    - rowgroup:
                      - row "Font family":
                        - cell "Font family":
                          - link "Font family":
                            - /url: javascript:;
                        - cell:
                          - link:
                            - /url: javascript:;
                - cell "Font size":
                  - table:
                    - rowgroup:
                      - row "Font size":
                        - cell "Font size":
                          - link "Font size":
                            - /url: javascript:;
                        - cell:
                          - link:
                            - /url: javascript:;
                - cell
                - cell:
                  - table "Unordered list":
                    - rowgroup:
                      - row:
                        - cell:
                          - link "Unordered list":
                            - /url: javascript:;
                        - cell:
                          - link "Unordered list":
                            - /url: javascript:;
                - cell:
                  - table "Ordered list":
                    - rowgroup:
                      - row:
                        - cell:
                          - link "Ordered list":
                            - /url: javascript:;
                        - cell:
                          - link "Ordered list":
                            - /url: javascript:;
                - cell
                - cell:
                  - link "Outdent":
                    - /url: javascript:;
                - cell:
                  - link "Indent":
                    - /url: javascript:;
                - cell:
                  - link "Blockquote":
                    - /url: javascript:;
                - cell
                - cell:
                  - link "Help":
                    - /url: javascript:;
                - cell:
                  - link "Edit HTML Source":
                    - /url: javascript:;
                - cell
          - table:
            - rowgroup:
              - row:
                - cell
                - cell:
                  - link "Undo (Ctrl+Z)":
                    - /url: javascript:;
                - cell:
                  - link "Redo (Ctrl+Y)":
                    - /url: javascript:;
                - cell
                - cell:
                  - link "Align left":
                    - /url: javascript:;
                - cell:
                  - link "Align center":
                    - /url: javascript:;
                - cell:
                  - link "Align right":
                    - /url: javascript:;
                - cell
                - cell:
                  - link "Insert/edit link":
                    - /url: javascript:;
                - cell:
                  - link "Unlink":
                    - /url: javascript:;
                - cell:
                  - link "Insert/edit anchor":
                    - /url: javascript:;
                - cell:
                  - link "Insert/edit image":
                    - /url: javascript:;
                - cell:
                  - link "Cleanup messy code":
                    - /url: javascript:;
                - cell:
                  - link "Toggle guidelines/invisible elements":
                    - /url: javascript:;
                - cell
                - cell:
                  - link "Insert date":
                    - /url: javascript:;
                - cell:
                  - link "Insert time":
                    - /url: javascript:;
                - cell
                - cell:
                  - table "Select text color":
                    - rowgroup:
                      - row:
                        - cell:
                          - link "Select text color":
                            - /url: javascript:;
                        - cell:
                          - link "Select text color":
                            - /url: javascript:;
                - cell:
                  - table "Select background color":
                    - rowgroup:
                      - row:
                        - cell:
                          - link "Select background color":
                            - /url: javascript:;
                        - cell:
                          - link "Select background color":
                            - /url: javascript:;
                - cell
                - cell:
                  - link "Insert new layer":
                    - /url: javascript:;
                - cell:
                  - link "Move forward":
                    - /url: javascript:;
                - cell:
                  - link "Move backward":
                    - /url: javascript:;
                - cell:
                  - link "Toggle absolute positioning":
                    - /url: javascript:;
                - cell
                - cell:
                  - link "Citation":
                    - /url: javascript:;
                - cell:
                  - link "Abbreviation":
                    - /url: javascript:;
                - cell:
                  - link "Acronym":
                    - /url: javascript:;
                - cell:
                  - link "Deletion":
                    - /url: javascript:;
                - cell:
                  - link "Insertion":
                    - /url: javascript:;
                - cell:
                  - link "Insert/Edit Attributes":
                    - /url: javascript:;
                - cell
                - cell:
                  - link "Insert non-breaking space character":
                    - /url: javascript:;
                - cell
          - link "Jump to tool buttons - Alt+Q, Jump to editor - Alt-Z, Jump to element path - Alt-X":
            - /url: "#"
      - row:
        - cell:
          - iframe
      - row "Path:":
        - cell "Path:":
          - text: "Path:"
          - link:
            - /url: "#"
          - link:
            - /url: javascript:;
  - button "Turn WYSIWYG Off"
  - button "Save Changes"
  - button "Reset"
- paragraph:
  - text: Services © 2025
  - link "IDX Broker":
    - /url: https://www.idxbroker.com
  - text: . All rights reserved.
- status
```

# Test source

```ts
   1 | import { Page, Locator, expect } from '@playwright/test';
   2 | import { BasePage } from '../../../BasePage';
   3 | import { EnvConfig } from '../../../../../env/env';
   4 | import { waitForPageToBeFullyLoaded } from '../../../../utils/page-utils';
   5 |
   6 |
   7 | const envConfig = EnvConfig.get();
   8 |
   9 | /**
   10 |  * ManageAgentsPage class implements the Page Object Model pattern for the Manage Agents page
   11 |  * Provides methods and locators to interact with elements on the page
   12 |  */
   13 | export class ManageAgentsPage extends BasePage {
   14 |     // Table locators
   15 |     readonly agentsTable: Locator;
   16 |     readonly searchInput: Locator;
   17 |     readonly clearSearchButton: Locator;
   18 |     readonly pageLength: Locator;
   19 |     readonly totalEntriesInfo: Locator;
   20 |     
   21 |     // Action buttons
   22 |     readonly addAgentButton: Locator;
   23 |     readonly importAgentButton: Locator;
   24 |     readonly exportAgentButton: Locator;
   25 |     readonly globalPermissionsButton: Locator;
   26 |     readonly deleteSelectedAgentsButton: Locator;
   27 |     
   28 |     // Checkboxes
   29 |     readonly selectAllCheckbox: Locator;
   30 |
   31 |     // Confirmation dialog elements
   32 |     readonly confirmDialogYesButton: Locator;
   33 |     readonly confirmDialogNoButton: Locator;
   34 |     readonly confirmationDialog: Locator;
   35 |
   36 |     //Messages
   37 |     private readonly successMessage: Locator;
   38 |     
   39 |     /**
   40 |      * Constructor - initializes the page object and locators
   41 |      * @param page - Playwright page object
   42 |      */
   43 |     constructor(page: Page) {
   44 |         super(page);
   45 |         
   46 |         // Initialize locators
   47 |         this.agentsTable = page.locator('#agentListTable');
   48 |         this.searchInput = page.getByRole('textbox', { name: 'Search: ?' });
   49 |         this.clearSearchButton = page.locator('.idx-datatable-clear-before-add-on');
   50 |         this.pageLength = page.locator('[name="agentListTable_length"]');
   51 |         this.totalEntriesInfo = page.locator('#agentListTable_info');
   52 |         
   53 |         // Action buttons
   54 |         this.addAgentButton = page.getByRole('link', { name: 'Add Agent' });
   55 |         this.importAgentButton = page.getByRole('link', { name: 'Import' });
   56 |         this.exportAgentButton = page.getByRole('link', { name: 'Export Agent' });
   57 |         this.globalPermissionsButton = page.getByRole('link', { name: 'Set Global Permissions' });
   58 |         this.deleteSelectedAgentsButton = page.getByRole('link', { name: 'Delete Agents' });
   59 |         
   60 |         // Checkboxes
   61 |         this.selectAllCheckbox = page.locator('#checkAll');
   62 |
   63 |         // Confirmation dialog elements
   64 |         this.confirmDialogYesButton = page.getByRole('button', { name: 'Yes' });
   65 |         this.confirmDialogNoButton = page.getByRole('button', { name: 'No' });
   66 |         this.confirmationDialog = page.locator('#confirmationDialog');
   67 |
   68 |         this.successMessage = page.locator('#jGrowl');
   69 |     }
   70 |     
   71 |     /**
   72 |      * Navigate to the Add Agent page
   73 |      */
   74 |     async navigateToManageAgentPage() {
   75 |         // Navigate through the menu structure to reach Add Agent page
   76 |         await this.page.locator('#idx-mw-navigation-bar').getByAltText('icon').click();
   77 |         await this.page.locator('span').filter({ hasText: /^Account$/ }).click();
   78 |         await this.page.getByText('Users', { exact: true }).click();
   79 |         await this.page.getByRole('link', { name: 'Agents' }).click();
   80 |     }
   81 |
   82 |     /**
   83 |     * Go directly to the Add Agent page
   84 |     */
   85 |     async goto(){
>  86 |         await this.page.goto(envConfig.MW_BASE_URL + '/mgmt/agents');
      |                         ^ Error: page.goto: net::ERR_ABORTED at https://middleware.idxsandbox.com/mgmt/agents
   87 |     }
   88 |     
   89 |     /**
   90 |      * Search for an agent by a search term
   91 |      * @param searchTerm - The term to search for (email, name, etc.)
   92 |      */
   93 |     async searchForAgent(searchTerm: string) {
   94 |         await this.searchInput.fill(searchTerm);
   95 |         await this.page.keyboard.press('Enter');
   96 |         await waitForPageToBeFullyLoaded(this.page);
   97 |         // Wait for the search to complete
   98 |         await this.page.waitForTimeout(500); // Small delay to ensure the search is processed
   99 |     }
  100 |     
  101 |     /**
  102 |      * Clear the search input
  103 |      */
  104 |     async clearSearch() {
  105 |         await this.clearSearchButton.click();
  106 |         await waitForPageToBeFullyLoaded(this.page);
  107 |         await this.page.waitForTimeout(500); // Small delay to ensure the search is cleared
  108 |     }
  109 |     
  110 |     /**
  111 |      * Check if an agent exists in the table by email
  112 |      * @param email - Email address to search for
  113 |      * @returns True if agent exists, false otherwise
  114 |      */
  115 |     async agentExistsByEmail(email: string) {
  116 |         const rowCount = await this.page.locator(`td.editable:text-is("${email}")`).count();
  117 |         return rowCount > 0;
  118 |     }
  119 |     
  120 |     /**
  121 |      * Verify agent exists by email
  122 |      * @param email - Email address to verify
  123 |      */
  124 |     async verifyAgentExistsByEmail(email: string) {
  125 |         await this.searchForAgent(email);
  126 |         const agentRow = this.page.locator(`tr:has(td:text-is("${email}"))`);
  127 |         await expect(agentRow).toBeVisible();
  128 |         await expect(agentRow).toContainText(email);
  129 |     }
  130 |     
  131 |
  132 |     /**
  133 |      * Edit an agent by email
  134 |      * @param email - Email address of the agent to edit
  135 |      */
  136 |     async editAgentByEmail(email: string) {
  137 |         await this.searchForAgent(email);
  138 |         const editButton = this.page.locator(`tr:has(td:text-is("${email}")) .idx-icon-edit`);
  139 |         await editButton.click();
  140 |         await this.page.waitForURL('**/mgmt/agents/**/edit');
  141 |     }
  142 |     
  143 |     /**
  144 |      * Login as an agent by email
  145 |      * @param email - Email address of the agent to login as
  146 |      */
  147 |     async loginAsAgentByEmail(email: string) {
  148 |         await this.searchForAgent(email);
  149 |         const loginButton = this.page.locator(`tr:has(td:text-is("${email}")) .idx-icon-login`);
  150 |         await loginButton.click();
  151 |     }
  152 |     
  153 |     /**
  154 |      * Select all agents using the "Select All" checkbox
  155 |      */
  156 |     async selectAllAgents() {
  157 |         await this.selectAllCheckbox.check();
  158 |         // Adding a small delay to ensure all checkboxes are updated
  159 |         await this.page.waitForTimeout(300);
  160 |     }
  161 |
  162 |     /**
  163 |      * Delete selected agents
  164 |      */
  165 |     async deleteSelectedAgents() {
  166 |         await this.deleteSelectedAgentsButton.click();
  167 |         // Assuming there's a confirmation dialog
  168 |         await this.confirmDialogYesButton.click();
  169 |         await waitForPageToBeFullyLoaded(this.page);
  170 |     }
  171 |     
  172 |     /**
  173 |      * Verify a specific success message is shown in the jGrowl notification
  174 |      * @param expectedMessage The expected message text to verify
  175 |      */
  176 |     async verifySuccessMessage(): Promise<void> {
  177 |         // Wait for the jGrowl notification to appear
  178 |         await this.successMessage.waitFor({ state: 'visible' });
  179 |         
  180 |         // Verify the text matches what we expect
  181 |         await expect(this.successMessage).toContainText('All Agents you selected have been deleted.');
  182 |     }
  183 |     
  184 | }
```