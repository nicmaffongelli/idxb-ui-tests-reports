# Test info

- Name: Authenticate SuperUser user and create a new client >> Authenticate SuperUser user and create a new client
- Location: /opt/atlassian/pipelines/agent/build/tests/setup/superUser.setup.ts:13:6

# Error details

```
Error: browserType.launch: Executable doesn't exist at /ms-playwright/chromium_headless_shell-1169/chrome-linux/headless_shell
╔══════════════════════════════════════════════════════════════════════╗
║ Looks like Playwright Test or Playwright was just updated to 1.52.0. ║
║ Please update docker image as well.                                  ║
║ -  current: mcr.microsoft.com/playwright:v1.50.0-noble               ║
║ - required: mcr.microsoft.com/playwright:v1.52.0-noble               ║
║                                                                      ║
║ <3 Playwright Team                                                   ║
╚══════════════════════════════════════════════════════════════════════╝
```

# Test source

```ts
   1 | import { test as setup } from '@playwright/test';
   2 | import { EnvConfig } from '../../env/env';
   3 | import { LoginPage } from '../pages/common/LoginPage';
   4 | import { CreateClientPage } from '../pages/superUser/clients/createClient';
   5 | import { AuthUsersPage } from '../pages/superUser/tools/AuthUsersPage';
   6 | import { ClientAccountInfoPage } from '../pages/superUser/clients/ClientAccountInfoPage';
   7 | import { MlsMembershipPage } from '../pages/superUser/clients/mlsMembershipPage';
   8 | import * as allure from "allure-js-commons";
   9 | const envConfig = EnvConfig.get();
  10 |
  11 | setup.describe.serial('Authenticate SuperUser user and create a new client', () => {
  12 | // This function runs before your tests to set up authentication
> 13 | setup('Authenticate SuperUser user and create a new client', async ({ page }) => {
     |      ^ Error: browserType.launch: Executable doesn't exist at /ms-playwright/chromium_headless_shell-1169/chrome-linux/headless_shell
  14 |     allure.epic('Authentication');
  15 |     allure.feature('User Login');
  16 |     allure.story('SuperUser Login and New Client Creation');
  17 |
  18 |     setup.setTimeout(80000);
  19 |
  20 |     const loginPage = new LoginPage(page);
  21 |     await loginPage.goto();
  22 |     await loginPage.login(envConfig.superUsers.main.email, envConfig.superUsers.main.password);
  23 |     await loginPage.verifyLoginSuccess();
  24 |     // Save the authenticated state
  25 |     await page.waitForTimeout(1000);
  26 |     await page.context().storageState({
  27 |         path: envConfig.superUsers.main.storageState
  28 |     });
  29 |
  30 |     // Create a new client and set the password to the same password as the rest of the clients
  31 |     const createClientPage = new CreateClientPage(page);
  32 |     const authUsersPage = new AuthUsersPage(page);
  33 |     const clientAccountInfoPage = new ClientAccountInfoPage(page);
  34 |     const mlsMembershipPage = new MlsMembershipPage(page);
  35 |     await createClientPage.goto();
  36 |     const email = envConfig.clients.engageNew.email ?? (() => { throw new Error("engageNew.email is undefined"); })();
  37 |     const domain = envConfig.clients.engageNew.domain ?? (() => { throw new Error("engageNew.domain is undefined"); })();
  38 |     const clientId = await createClientPage.createClientWithDefaultValuesAndEmail(email, domain);
  39 |     console.log(`Client domain2: ${envConfig.clients.engageNew.domain}`);
  40 |     await clientAccountInfoPage.goto(clientId);
  41 |     await clientAccountInfoPage.navigateToEditAuthInfo();
  42 |     const defaultPassword = envConfig.clients.engageNew.password;
  43 |     await authUsersPage.updatePassword(defaultPassword, defaultPassword);
  44 |     await mlsMembershipPage.goto(clientId);
  45 |     await mlsMembershipPage.addMls({mlsName:'b001 Regional Multiple Listing Service (RMLS)'});
  46 |     await mlsMembershipPage.toggleFirstActiveDataApproved();
  47 | });
  48 |
  49 | setup('Authenticate new client', async ({ page }) => {
  50 |     allure.epic('Authentication');
  51 |     allure.feature('User Login');
  52 |     allure.story('New Client Login');
  53 |
  54 |     // Login as the new client created
  55 |     const loginPage = new LoginPage(page);
  56 |     await loginPage.goto();
  57 |     await loginPage.login(envConfig.clients.engageNew.email, envConfig.clients.engageNew.password);
  58 |     await loginPage.verifyLoginSuccess();
  59 |     // Save the authenticated state
  60 |     await page.waitForTimeout(1000);
  61 |     await page.context().storageState({
  62 |         path: envConfig.clients.engageNew.storageState
  63 |     });
  64 | });
  65 | });
```