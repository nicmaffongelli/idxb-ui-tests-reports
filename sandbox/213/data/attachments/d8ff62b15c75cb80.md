# Test info

- Name: Type of user: Client >> MW Menu: Design >> Sub-menu: Settings >> Sub-menu: Global >> Set Default Number of Properties Per Page in Results Search Settings and verify in FE page - User: engage_new
- Location: /opt/atlassian/pipelines/agent/build/tests/specs/clients/design/settings/resultsGlobalPreferences.spec.ts:17:29

# Error details

```
TimeoutError: page.waitForSelector: Timeout 20000ms exceeded.
Call log:
  - waiting for locator('.idx-listing-card__image-overlay') to be visible

    at FrontEndAddressSearchPage.countListings (/opt/atlassian/pipelines/agent/build/tests/pages/client/frontEndPages/FrontEndAddressSearchPage.ts:121:21)
    at FrontEndAddressSearchPage.verifyResultCount (/opt/atlassian/pipelines/agent/build/tests/pages/client/frontEndPages/FrontEndAddressSearchPage.ts:131:36)
    at /opt/atlassian/pipelines/agent/build/tests/specs/clients/design/settings/resultsGlobalPreferences.spec.ts:32:68
```

# Page snapshot

```yaml
- link "New Search":
  - /url: https://qatest1746204097646.idxsandbox.com/idx/search/address
- link "Modify Search":
  - /url: https://qatest1746204097646.idxsandbox.com/idx/search/address?modifySearch=true
- link "Save Search":
  - /url: "#saveSearch"
- heading "0 Listings" [level=4]
- text: Data services provided by
- link "IDX Broker":
  - /url: https://www.idxbroker.com/
```

# Test source

```ts
   21 |   private readonly searchRefinementSelect: Locator;
   22 |   private readonly searchButton: Locator;
   23 |
   24 |   // Results page elements
   25 |   private readonly listingCardImageOverlays: Locator; // Used to count results
   26 |   private readonly resultsPerPageSelect: Locator;
   27 |   private readonly totalResults: Locator; // For checking total result count text
   28 |
   29 |   /**
   30 |    * Constructor initializes all page elements
   31 |    * @param page Playwright page object
   32 |    */
   33 |   constructor(page: Page) {
   34 |     super(page);
   35 |
   36 |     // Navigation elements
   37 |     this.advancedSearchLink = page.locator('.IDX-nav-advanced .IDX-searchNavLink');
   38 |     this.listingIdLink = page.locator('.IDX-nav-listingid .IDX-searchNavLink');
   39 |     this.addressSearchLink = page.locator('.IDX-nav-address .IDX-searchNavLink');
   40 |     this.aiSmartSearchLink = page.locator('.IDX-nav-smart .IDX-searchNavLink');
   41 |     this.mapSearchLink = page.locator('.IDX-nav-mapsearch .IDX-searchNavLink');
   42 |
   43 |     // Search form elements
   44 |     this.addressInput = page.locator('#IDX-address');
   45 |     this.cczSelect = page.locator('#IDX-ccz-select');
   46 |     this.propertyTypeSelect = page.locator('#IDX-pt');
   47 |     this.searchRefinementSelect = page.locator('#IDX-searchRefinement');
   48 |     this.searchButton = page.locator('#IDX-formSubmit');
   49 |
   50 |     // Results page elements
   51 |     this.listingCardImageOverlays = page.locator('.idx-listing-card__image-overlay');
   52 |     this.resultsPerPageSelect = page.locator('#IDX-resultsPerPage');
   53 |     this.totalResults = page.locator('.IDX-resultsCountMessage');
   54 |   }
   55 |
   56 |   /**
   57 |    * Navigate to the Address Search page
   58 |    */
   59 |   async goto(userSubdomain: string): Promise<void> {
   60 |     await this.page.goto(`https://${userSubdomain}.${envConfig.URL_ENV_PART}.com/idx/search/address`);
   61 |   }
   62 |
   63 |   /**
   64 |    * Enter address search criteria
   65 |    * @param address The address to search for
   66 |    */
   67 |   async enterAddress(address: string): Promise<void> {
   68 |     await this.addressInput.fill(address);
   69 |   }
   70 |
   71 |   /**
   72 |    * Select a city, county, or postal code
   73 |    * @param value The value to select
   74 |    * @param type The type (city, county, zipcode)
   75 |    */
   76 |   async selectCCZ(value: string, type: 'city' | 'county' | 'zipcode'): Promise<void> {
   77 |     // Open the dropdown
   78 |     await this.cczSelect.click();
   79 |     
   80 |     // Find and click the option with matching value and type
   81 |     const option = this.page.locator(`#select2-IDX-ccz-select-results option[value="${value}"][data-type="${type}"]`);
   82 |     await option.click();
   83 |   }
   84 |
   85 |   /**
   86 |    * Select property type
   87 |    * @param propertyType The property type value to select
   88 |    */
   89 |   async selectPropertyType(propertyType: string): Promise<void> {
   90 |     await this.propertyTypeSelect.selectOption(propertyType);
   91 |   }
   92 |
   93 |   /**
   94 |    * Select search refinement options
   95 |    * @param refinements Array of refinement options to select
   96 |    */
   97 |   async selectRefinements(refinements: string[]): Promise<void> {
   98 |     await this.searchRefinementSelect.click();
   99 |     
  100 |     for (const refinement of refinements) {
  101 |       await this.page.locator(`#select2-IDX-searchRefinement-results option[value="${refinement}"]`).click();
  102 |     }
  103 |     
  104 |     // Click away to close dropdown
  105 |     await this.page.click('body', { position: { x: 0, y: 0 } });
  106 |   }
  107 |
  108 |   /**
  109 |    * Perform search with current criteria
  110 |    */
  111 |   async performSearch(): Promise<void> {
  112 |     await this.searchButton.click();
  113 |     await waitForPageToBeFullyLoaded(this.page);
  114 |   }
  115 |
  116 |   /**
  117 |    * Count the number of listings on the results page
  118 |    * @returns The number of listings displayed
  119 |    */
  120 |   async countListings(): Promise<number> {
> 121 |     await this.page.waitForSelector('.idx-listing-card__image-overlay');
      |                     ^ TimeoutError: page.waitForSelector: Timeout 20000ms exceeded.
  122 |     const count = await this.listingCardImageOverlays.count();
  123 |     return count;
  124 |   }
  125 |
  126 |   /**
  127 |    * Verify that the number of results matches the expected count
  128 |    * @param expectedCount The expected number of results
  129 |    */
  130 |   async verifyResultCount(expectedCount: number): Promise<void> {
  131 |     const actualCount = await this.countListings();
  132 |     expect(actualCount).toBe(expectedCount);
  133 |   }
  134 |
  135 |   
  136 |
  137 | }
```