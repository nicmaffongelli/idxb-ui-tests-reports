# Test info

- Name: Run these test in serial mode for each user >> Create Agent - User: Client-Engage-1-Existing
- Location: /opt/atlassian/pipelines/agent/build/src/tests/specs/clients/07_account/04_users/agents.spec.ts:17:13

# Error details

```
TimeoutError: locator.fill: Timeout 20000ms exceeded.
Call log:
  - waiting for getByRole('textbox', { name: 'Email*' })

    at AddAgentPage.fillAccountContactInfo (/opt/atlassian/pipelines/agent/build/src/page-objects/client/07_account/04_users/AddAgentPage.ts:91:31)
    at AddAgentPage.fillAccountContactInfoWithDefaultValuesAndEmail (/opt/atlassian/pipelines/agent/build/src/page-objects/client/07_account/04_users/AddAgentPage.ts:127:20)
    at /opt/atlassian/pipelines/agent/build/src/tests/specs/clients/07_account/04_users/agents.spec.ts:23:39
```

# Page snapshot

```yaml
- navigation:
  - link "IDX Broker":
    - /url: /mgmt/dashboard
    - img "IDX Broker"
  - list:
    - listitem
- text: Notifications
- strong: You’re all caught up! Keep an eye out for new notifications. We’ll post them here.
- navigation:
  - list:
    - listitem
    - listitem
    - listitem
- status
```

# Test source

```ts
   1 | import { Page, Locator, BasePage } from '@shared-client-imports';
   2 |
   3 | export class AddAgentPage extends BasePage {
   4 |     
   5 |     // Form fields - Account/Contact tab
   6 |     readonly emailField: Locator;
   7 |     readonly passwordField: Locator;
   8 |     readonly firstNameField: Locator;
   9 |     readonly lastNameField: Locator;
   10 |     readonly displayNameField: Locator;
   11 |     readonly titleField: Locator;
   12 |     readonly roleDropdown: Locator;
   13 |     readonly addressField: Locator;
   14 |     readonly cityField: Locator;
   15 |     readonly stateField: Locator;
   16 |     readonly zipField: Locator;
   17 |     readonly countryField: Locator;
   18 |     readonly homePhoneField: Locator;
   19 |     readonly cellPhoneField: Locator;
   20 |     readonly officePhoneField: Locator;
   21 |     readonly preferredPhoneDropdown: Locator;
   22 |     readonly smsOptInRadioYes: Locator;
   23 |     readonly smsAlertPhoneField: Locator;
   24 |     
   25 |     // Action buttons
   26 |     readonly saveChangesButton: Locator;
   27 |
   28 |     /**
   29 |      * Constructor - initializes the page object and locators
   30 |      * @param page - Playwright page object
   31 |      */
   32 |     constructor(page: Page) {
   33 |         super(page);
   34 |         
   35 |         // Initialize all locators
   36 |         this.emailField = page.getByRole('textbox', { name: 'Email*' });
   37 |         this.passwordField = page.getByRole('textbox', { name: 'Password*' });
   38 |         this.firstNameField = page.getByRole('textbox', { name: 'First Name' });
   39 |         this.lastNameField = page.getByRole('textbox', { name: 'Last Name' });
   40 |         this.displayNameField = page.getByRole('textbox', { name: 'Display Name' });
   41 |         this.titleField = page.getByRole('textbox', { name: 'Title/Description' });
   42 |         this.roleDropdown = page.getByLabel('Role');
   43 |         this.addressField = page.getByRole('textbox', { name: 'Address' });
   44 |         this.cityField = page.getByRole('textbox', { name: 'City' });
   45 |         this.stateField = page.getByRole('textbox', { name: 'State/Province' });
   46 |         this.zipField = page.getByRole('textbox', { name: 'Zip Code' });
   47 |         this.countryField = page.getByRole('textbox', { name: 'Country' });
   48 |         this.homePhoneField = page.getByRole('textbox', { name: 'Home Phone' });
   49 |         this.cellPhoneField = page.getByRole('textbox', { name: 'Cell Phone' });
   50 |         this.officePhoneField = page.getByRole('textbox', { name: 'Office Phone' });
   51 |         this.preferredPhoneDropdown = page.getByLabel('Preferred Phone');
   52 |         this.smsOptInRadioYes = page.getByRole('radio', { name: 'Yes' });
   53 |         this.smsAlertPhoneField = page.getByRole('textbox', { name: 'Phone', exact: true });
   54 |         
   55 |         // Actions
   56 |         this.saveChangesButton = page.getByRole('button', { name: 'Save Changes' });
   57 |     }
   58 |
   59 |     /**
   60 |    * Go to directly to the Add Agent page
   61 |    */
   62 |   async goto(){
   63 |     await this.page.goto(this.globalAndEnvironmentVariables.MW_BASE_URL + '/mgmt/agents/create');
   64 |   }
   65 |
   66 |     /**
   67 |      * Fill in the basic required account/contact information
   68 |      * @param agentInfo - Object containing agent information
   69 |      */
   70 |     async fillAccountContactInfo(agentInfo: {
   71 |         email: string,
   72 |         password: string,
   73 |         firstName: string,
   74 |         lastName: string,
   75 |         displayName: string,
   76 |         title: string,
   77 |         role: 'agent' | 'management' | 'staff',
   78 |         address?: string,
   79 |         city?: string,
   80 |         state?: string,
   81 |         zip?: string,
   82 |         country?: string,
   83 |         homePhone?: string,
   84 |         cellPhone?: string,
   85 |         officePhone?: string,
   86 |         preferredPhone?: 'agentCellPhone' | 'agentHomePhone' | 'agentOfficePhone',
   87 |         enableSmsAlerts?: boolean,
   88 |         smsAlertPhone?: string
   89 |     }) {
   90 |         // Fill required fields
>  91 |         await this.emailField.fill(agentInfo.email);
      |                               ^ TimeoutError: locator.fill: Timeout 20000ms exceeded.
   92 |         await this.passwordField.fill(agentInfo.password);
   93 |         await this.firstNameField.fill(agentInfo.firstName);
   94 |         await this.lastNameField.fill(agentInfo.lastName);
   95 |         await this.displayNameField.fill(agentInfo.displayName);
   96 |         await this.titleField.fill(agentInfo.title);
   97 |         await this.roleDropdown.selectOption(agentInfo.role);
   98 |
   99 |         // Fill optional fields if provided
  100 |         if (agentInfo.address) await this.addressField.fill(agentInfo.address);
  101 |         if (agentInfo.city) await this.cityField.fill(agentInfo.city);
  102 |         if (agentInfo.state) await this.stateField.fill(agentInfo.state);
  103 |         if (agentInfo.zip) await this.zipField.fill(agentInfo.zip);
  104 |         if (agentInfo.country) await this.countryField.fill(agentInfo.country);
  105 |         if (agentInfo.homePhone) await this.homePhoneField.fill(agentInfo.homePhone);
  106 |         if (agentInfo.cellPhone) await this.cellPhoneField.fill(agentInfo.cellPhone);
  107 |         if (agentInfo.officePhone) await this.officePhoneField.fill(agentInfo.officePhone);
  108 |         
  109 |         // Set preferred phone if provided
  110 |         if (agentInfo.preferredPhone) {
  111 |             await this.preferredPhoneDropdown.selectOption(agentInfo.preferredPhone);
  112 |         }
  113 |         
  114 |         // Configure SMS alerts if needed
  115 |         if (agentInfo.enableSmsAlerts) {
  116 |             await this.smsOptInRadioYes.check();
  117 |             if (agentInfo.smsAlertPhone) {
  118 |                 await this.smsAlertPhoneField.fill(agentInfo.smsAlertPhone);
  119 |             }
  120 |         }
  121 |     }
  122 |
  123 |     /**
  124 |      * Fill in the basic required account/contact information with default values
  125 |      */
  126 |     async fillAccountContactInfoWithDefaultValuesAndEmail(email: string) {
  127 |         await this.fillAccountContactInfo({
  128 |             email: email,
  129 |             password: '123456Asd!@#',
  130 |             firstName: 'Qa',
  131 |             lastName: 'UiAutomation',
  132 |             displayName: 'QaUiAutomation',
  133 |             title: 'DONT TOUCH',
  134 |             role: 'agent',
  135 |             address: '3562 SE Harrison St',
  136 |             city: 'Portland',
  137 |             state: 'Oregon',
  138 |             zip: '97214',
  139 |             country: 'United States',
  140 |             homePhone: '1001001002',
  141 |             cellPhone: '3055405076',
  142 |             officePhone: '1001001001',
  143 |             preferredPhone: 'agentCellPhone',
  144 |             enableSmsAlerts: true,
  145 |             smsAlertPhone: '+13055405076'
  146 |         });
  147 |     }
  148 |
  149 |     /**
  150 |      * Submit the form by clicking the Save Changes button
  151 |      */
  152 |     async saveChanges() {
  153 |         await this.saveChangesButton.click();
  154 |     }
  155 | }
```